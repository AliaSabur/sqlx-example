<script setup lang="ts">
import {onMounted, ref} from "vue";
import axios from "axios";
import TextComponent from "./components/TextComponent.vue";

const text = ref('')
const url = ref('')

onMounted(() => {
  const urlParams = new URLSearchParams(window.location.search);
  const id = urlParams.get('id');

  axios.get('/?id=' + id).then(res => {
    text.value = res.data.text
  })

  text.value = testText.value
})

// è¿™é‡Œå¯ä»¥æµ‹è¯•å‘é€å†™å…¥markdownæ–‡æœ¬çš„è¯·æ±‚
const testText = ref(`
# ä¸€çº§æ ‡é¢˜

## äºŒçº§æ ‡é¢˜

### ä¸‰çº§æ ‡é¢˜

ğŸŒ

:smile: :smile: :smile: :satellite:
:smile:

å…¬å¼æµ‹è¯•

a$$e^{i\\pi} + 1 = 0$$a

a$$\\frac{1}{2} $$a

bbc\\[\\frac{1}{2}\\]abc

\\[ \\int_0^\\pi \\sin x \\, dx \\]

a$\\frac{1}{2}$a

a\\(\\frac{1}{2}\\)a

å…¬å¼æµ‹è¯•

a$ax^2 + bx + c = 0$a

$ax^2 + bx + c = 0$

a\\(ax^2 + bx + c = 0\\)a

\\[ ax^2 + bx + c = 0 \\]

\\[
ax^2 + bx + c = 0 
\\]

\\( x = \\frac{-b \\pm \\sqrt{b^2 - 4ac}}{2a} \\)

test\\(\\left( \\frac{1}{2}abc \\right) \\)test

$
\\left( \\begin{matrix}
	1&		0&		0\\\\
	0&		1&		0\\\\
	0&		0&		1\\\\
\\end{matrix}\\right)
$

a\\(\\left( \\begin{matrix}
1&		aaa&		0\\\\
0&		1&		0\\\\
0&		0&		1\\\\
\\end{matrix}\\right)\\)bcd

a\\(\\left( \\begin{matrix}1& aaa& 0\\\\0& 1& 0\\\\0& 0& 1\\\\\\end{matrix}\\right)\\)bcd

a$\\left( \\begin{matrix}1& aaa& 0\\\\0& 1& 0\\\\0& 0& 1\\\\\\end{matrix}\\right)$bcd

è¿™æ˜¯ä¸€ä¸ªæ™®é€šçš„æ³¨é‡Š //aa


\\[
\\left( \\begin{matrix}
	1&		0&		0\\\\
	0&		1&		0\\\\
	0&		0&		1\\\\
\\end{matrix}\\right)
\\]

$$
\\left[ \\begin{matrix}
	1&		0&		0\\\\
	0&		1&		0\\\\
	0&		0&		1\\\\
\\end{matrix} \\right]
$$

\\[\\left[ \\frac{1}{2}ABC \\right] \\]

ä»£ç é«˜äº®æµ‹è¯•
\`\`\`java
// FileName: HelloWorld.java
public class HelloWorld {
  // Java å…¥å£ç¨‹åºï¼Œç¨‹åºä»æ­¤å…¥å£
  public static void main(String[] args) {
    System.out.println("Hello,World!"); // å‘æ§åˆ¶å°æ‰“å°ä¸€æ¡è¯­å¥
  }
}
\`\`\`

\`\`\`c
#include <stdio.h>  // å¼•å…¥æ ‡å‡†è¾“å…¥è¾“å‡ºåº“å¤´æ–‡ä»¶

int main() {
  // ä½¿ç”¨ printf å‡½æ•°è¾“å‡º "Hello, World!"
  printf("Hello, World!\\n");
  return 0;  // ç¨‹åºæ‰§è¡ŒæˆåŠŸï¼Œè¿”å›0
}
\`\`\`

| Header 1      | Header 2      | Header 3      |
|---------------|---------------|---------------|
| Row 1, Col 1  | Row 1, Col 2  | Row 1, Col 3  |
| Row 2, Col 1  | Row 2, Col 2  | Row 2, Col 3  |
| Row 3, Col 1  | Row 3, Col 2  | Row 3, Col 3  |

### æ™®é€šæµ‹è¯•ï¼š
1. **åŒ…å¼•å…¥**ï¼šä½¿ç”¨ \`tikz\` å’Œ \`pgfplots\` åŒ…ï¼Œ\`pgfplots\` æ˜¯åŸºäº TiKZ çš„åŠŸèƒ½æ›´ä¸°å¯Œçš„ç»˜å›¾å·¥å…·ï¼Œé€‚åˆç”¨äºç»˜åˆ¶äºŒç»´å’Œä¸‰ç»´å›¾è¡¨ã€‚
2. **åæ ‡è½´è®¾ç½®**ï¼š
   - \`xmode=log\` å°† x è½´è®¾ç½®ä¸ºå¯¹æ•°æ¨¡å¼ï¼Œé€‚åˆé¢‘ç‡å“åº”å›¾ã€‚
   - \`xmin\`ã€\`xmax\`ã€\`ymin\`ã€\`ymax\` è®¾å®šåæ ‡è½´çš„èŒƒå›´ã€‚
   - \`xtick\` å’Œ \`ytick\` å®šä¹‰åæ ‡è½´çš„åˆ»åº¦ã€‚
   - ç½‘æ ¼çº¿å¸®åŠ©æ›´å¥½åœ°é˜…è¯»å›¾è¡¨ã€‚
3. **å¢ç›Šæ›²çº¿**ï¼š
   - ä½¿ç”¨ \`\\addplot\` ç»˜åˆ¶å››æ®µä¸åŒçš„æ›²çº¿ï¼Œè¡¨ç¤ºä¸åŒé¢‘ç‡åŒºé—´çš„å¢ç›Šå˜åŒ–ã€‚
   - ä½¿ç”¨é¢œè‰²å’Œç²—ç»†åŒºåˆ†ä¸åŒçš„æ›²çº¿æ®µã€‚
4. **å›¾ä¾‹è¯´æ˜**ï¼š\`\\legend\` æ·»åŠ å›¾ä¾‹ï¼Œæè¿°æ¯æ®µæ›²çº¿çš„ç‰¹æ€§ã€‚

**ç¼ºç‚¹**ï¼š
- é™ä½äº†æ ·å¼è¡¨çš„å¯ç»´æŠ¤æ€§ï¼Œå› ä¸º \`!important\` ä¼šæ‰“ç ´ CSS çš„è‡ªç„¶å±‚å è§„åˆ™ã€‚
- ä½¿å¾—è°ƒè¯•æ ·å¼é—®é¢˜å˜å¾—æ›´åŠ å›°éš¾ï¼Œå› ä¸ºå®ƒå¯ä»¥è¦†ç›–ä½ å¯èƒ½æ²¡æœ‰æ³¨æ„åˆ°çš„æ ·å¼è§„åˆ™ã€‚
- è¿‡åº¦ä½¿ç”¨ \`!important\` å¯èƒ½å¯¼è‡´æ ·å¼å†²çªéš¾ä»¥è§£å†³ï¼Œå› ä¸ºæ¯ä¸ªä½¿ç”¨ \`!important\` çš„æ ·å¼éƒ½ä¼šå°è¯•ä¼˜å…ˆäºå…¶ä»–æ ·å¼ã€‚

`)
function uploadTest() {
  axios.post('/upload', {
    text: testText.value,
  }).then(res => {
    url.value = res.data.url
  })
}

</script>


<template>
  <div>
    <textarea v-model="testText" style="height: 100px;width: 100%"></textarea>
    <button style="background-color: #4CAF50; color: white; padding: 5px 20px; border: none; cursor: pointer;" @click="uploadTest">ç‚¹å‡»æˆ‘æµ‹è¯•å†™å…¥ Markdown çš„è¯·æ±‚</button>
    <div>è¯·æ±‚è¿”å›çš„URLé“¾æ¥ï¼š<a :href="url" target="_blank">{{url}}</a> ï¼ˆç‚¹å‡»æ­¤é“¾æ¥æŸ¥çœ‹æ¸²æŸ“åçš„Markdownæ–‡æœ¬ï¼‰</div>
    <br/>
    <TextComponent ref="textRef" :text="text"/>
  </div>
</template>

<style scoped>

</style>
